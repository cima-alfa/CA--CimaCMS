@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    html {
        color-scheme: dark light;
    }

    body {
        @apply bg-zinc-200 text-zinc-800 dark:bg-zinc-900 dark:text-zinc-200;
    }

    :focus-visible {
        @apply outline outline-2 outline-offset-2 outline-orange-500;
    }
}

@layer components {
    /* Layout */

    .layout-grid {
        @apply min-h-screen;

        @apply grid min-h-dvh w-full;

        grid-template-areas:
            "header"
            "main"
            "footer"
            "aside";

        grid-template-rows: auto 1fr auto auto;
    }

    .layout-header {
        grid-area: header;

        @apply sticky
			top-0
			z-50
			h-14
			border-b
			border-white
			bg-zinc-200
			shadow-[0_2px_5px_-4px_hsl(0,0%,0%,.25)]
			dark:border-zinc-700
			dark:bg-zinc-900
			dark:shadow-[0_2px_5px_-2px_hsl(0,0%,0%,.5)];
    }

    .layout-aside {
        grid-area: aside;

        @apply sticky
			bottom-0
			z-40
			border-t
			border-white
			bg-zinc-200
			shadow-[2px_0_5px_-4px_hsl(0,0%,0%,.25)]
			dark:border-zinc-700
			dark:bg-zinc-900 dark:shadow-[2px_0_5px_-2px_hsl(0,0%,0%,.5)];
    }

    .layout-main {
        grid-area: main;

        @apply z-30 bg-zinc-100 dark:bg-zinc-800;
    }

    .layout-footer {
        grid-area: footer;

        @apply z-20 h-10 bg-zinc-100 dark:bg-zinc-800;
    }

    /* Content */

    a {
        @apply text-sky-800 dark:text-sky-200 hover:underline;
    }

    input,
    textarea,
    select {
        @apply accent-sky-600 dark:accent-sky-400;
    }

    .title {
        @apply text-4xl font-bold text-balance;
    }

    .info-box {
        @apply border
            border-sky-300
            rounded
            px-3
            py-[6px]
            bg-sky-100
            text-sky-950;

        box-shadow: inset 0 0 2px 1px hsl(0, 0%, 0%, 0.2);

        &[data-error] {
            @apply border-red-300 bg-red-100 text-red-950;
        }
    }

    .text-error {
        @apply text-red-700 dark:text-red-300;
    }

    .input,
    .select {
        &[data-error] {
            @apply outline-red-700 dark:outline-red-300;
        }

        @apply w-full
            rounded
            outline
            outline-1
            -outline-offset-0
            outline-slate-400
            bg-slate-300
            px-3
            py-2
            dark:outline-slate-500
            dark:bg-slate-600
            focus:outline-sky-500
            focus-within:outline-sky-500
            focus:outline-2
            focus-within:outline-2
            transition-colors;
    }

    .select {
        @apply relative
            p-0
            overflow-hidden
            before:absolute
            before:top-0
            before:right-0
            before:h-full
            before:aspect-square
            before:bg-slate-400
            before:pointer-events-none
            dark:before:bg-slate-500
            after:absolute
            after:top-5
            after:right-5
            after:w-0
            after:h-0
            after:border-[6px]
            after:border-transparent
            after:border-t-current
            after:translate-x-1/2
            after:-translate-y-[12.5%]
            after:pointer-events-none
            after:origin-[center_25%]
            after:transition-transform
            after:-rotate-90
            focus-within:after:rotate-0;

        & > :where(select) {
            @apply appearance-none
                w-full
                bg-transparent
                px-3
                py-2
                pr-[3.25rem]
                outline-none
                cursor-pointer;

            & > :where(option) {
                @apply bg-zinc-50
                    text-zinc-700;
            }
        }
    }

    .checkbox-wrapper,
    .switch-wrapper {
        @apply inline-grid
            grid-cols-[auto_1fr]
            items-center
            gap-x-3
            gap-y-1
            cursor-pointer mt-9;
    }

    .checkbox,
    .switch {
        &[data-error] {
            @apply outline-red-700 dark:outline-red-300;
        }

        @apply relative 
            outline
            outline-1
            -outline-offset-0
            outline-slate-400
            bg-slate-300
            dark:outline-slate-500
            dark:bg-slate-600;

        & > :where(input) {
            @apply appearance-none
                sr-only;
        }
    }

    .checkbox-cross-pseudo {
        @apply absolute
            top-1/2
            left-1/2
            w-[1rem]
            h-[0.1875rem]
            -translate-x-1/2
            -translate-y-1/2
            rounded-full
            bg-green-700
            dark:bg-green-300
            opacity-0
            transition-opacity
            duration-[45ms]
            ease-linear;
    }

    .checkbox {
        @apply w-[1.125rem] 
            h-[1.125rem] 
            rounded;

        & > :where(.checkbox-cross) {
            @apply absolute
                top-0
                left-0
                w-full
                h-full
                before:checkbox-cross-pseudo
                after:checkbox-cross-pseudo
                before:rotate-45
                after:-rotate-45;
        }

        & > :where(input:checked + .checkbox-cross) {
            @apply before:opacity-100 after:opacity-100;
        }
    }

    .switch {
        @apply w-10 h-5 rounded-full;

        & > :where(.switch-handle) {
            @apply absolute
                top-[0.125rem]
                left-[0.125rem]
                w-4
                h-4
                bg-red-600
                dark:bg-red-400
                rounded-full
                transition-[background-color,transform];
        }

        & > :where(input:checked + .switch-handle) {
            @apply translate-x-[calc(100%_+_4px)]
                bg-green-700
                dark:bg-green-300;
        }
    }

    .input-message {
        @apply text-sm font-bold text-pretty;

        &[data-error] {
            @apply text-error;
        }
    }

    .btn {
        @apply block
			w-full
			rounded
			bg-sky-600
			hover:bg-sky-700
			focus:bg-sky-700
			p-3
			text-lg
			font-bold
			text-zinc-100
			shadow-md
			transition-colors
            cursor-pointer
			dark:bg-sky-400
			dark:text-zinc-900
			dark:hover:bg-sky-300
			dark:focus:bg-sky-300;
    }

    /* Media Large */

    @screen lg {
        /* Layout */

        .layout-grid {
            grid-template-areas:
                "header header"
                "aside main"
                "aside footer";

            grid-template-rows: auto 1fr auto;
            grid-template-columns: auto 1fr;
        }

        .layout-aside {
            position: initial;

            @apply bottom-auto w-64 border-r border-t-0;
        }

        .primary-navigation {
            @apply sticky top-14;
        }

        /* Content */

        .nav-link {
            @apply relative 
				isolate 
				grid 
				h-14 
				content-center 
				bg-slate-600 
				px-5 
				text-sm
                text-zinc-100
				font-bold
				transition-colors
				before:absolute
				before:inset-0
				before:-z-10
				before:-translate-x-full
				before:bg-sky-500
				before:transition-transform
				hover:text-zinc-800
				hover:before:translate-x-0
                hover:no-underline
				focus-visible:text-zinc-800
				focus-visible:before:translate-x-0
				focus-visible:-outline-offset-1;
        }
    }
}
